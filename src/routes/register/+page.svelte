<script lang="ts">
	import { enhance } from '$app/forms'
	import { AlertCircle } from 'lucide-svelte'

	export let form
</script>

<form
	class="bg-base-200 mx-auto mt-20 flex max-w-sm flex-col items-center justify-center rounded-lg py-6"
	use:enhance
	action="?/register"
	method="post"
>
	<div class="form-control w-full max-w-xs">
		<!-- svelte-ignore a11y-label-has-associated-control -->
		<label class="label">
			<span class="label-text">Nombres</span>
		</label>

		<input
			type="text"
			autocomplete="off"
			placeholder="Name"
			class="input input-bordered w-full max-w-xs"
			name="names"
			required
		/>
		{#if form?.incorrect && form?.errors.nameError !== null}
			<div class="flex flex-row items-center text-red-600 bg-blend-color-burn">
				<AlertCircle class="mr-2 h-4 w-4" />
				<p class=" text-red-600">
					{form?.errors.nameError[0]}
				</p>
			</div>
		{/if}
		<!-- svelte-ignore a11y-label-has-associated-control -->
		<label class="label">
			<span class="label-text">Last Names</span>
		</label>
		<input
			type="text"
			autocomplete="off"
			placeholder="Name"
			class="input input-bordered w-full max-w-xs"
			name="last_names"
			required
		/>
		{#if form?.incorrect && form?.errors.lastNameError !== null}
			<div class="flex flex-row items-center text-red-600 bg-blend-color-burn">
				<AlertCircle class="mr-2 h-4 w-4" />
				<p class=" text-red-600">
					{form?.errors.lastNameError[0]}
				</p>
			</div>
		{/if}
	</div>
	<div class="form-control w-full max-w-xs">
		<!-- svelte-ignore a11y-label-has-associated-control -->
		<label class="label">
			<span class="label-text">Nombre de usuario</span>
		</label>
		<input
			type="text"
			autocomplete="off"
			placeholder="Username"
			class="input input-bordered w-full max-w-xs"
			name="username"
			required
		/>
		{#if form?.incorrect && form?.errors.usernameError !== null}
			<div class="flex flex-row items-center text-red-600 bg-blend-color-burn">
				<AlertCircle class="mr-2 h-4 w-4" />
				<p class=" text-red-600">
					{form?.errors.usernameError[0]}
				</p>
			</div>
		{/if}
		{#if form?.duplicated}
			<div class="flex flex-row items-center text-red-600 bg-blend-color-burn">
				<AlertCircle class="mr-2 h-4 w-4" />
				<p class=" text-red-600">Username already exists</p>
			</div>
		{/if}
	</div>

	<div class="form-control w-full max-w-xs">
		<!-- svelte-ignore a11y-label-has-associated-control -->
		<label class="label">
			<span class="label-text">Contrase√±a</span>
		</label>
		<input
			type="text"
			autocomplete="off"
			placeholder="Password"
			class="input input-bordered w-full max-w-xs"
			name="password"
			required
		/>
		{#if form?.incorrect && form?.errors.passwordError !== null}
			<div class="flex flex-row items-center text-red-600 bg-blend-color-burn">
				<AlertCircle class="mr-2 h-4 w-4" />
				<p class="text-red-600">
					{form?.errors.passwordError[0]}
				</p>
			</div>
		{/if}
	</div>

	<button class="btn btn-primary mt-4 max-w-xs" type="submit"
		>Crear cuenta</button
	>
</form>
